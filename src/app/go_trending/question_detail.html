<md-toolbar>
  <div class="md-toolbar-tools">
      <md-button class="md-icon-button"
                 aria-label="Menu Button"
                 hide-gt-md
                 ng-click="onClickMenu();">
          <md-icon
                  md-svg-icon="assets/icons/menu.svg"
                  aria-label="Menu Icon">
          </md-icon>
      </md-button>

      <h2 ng-if="question.asked_by.first_name">Details of {{question.asked_by.first_name}} {{question.asked_by.last_name}}'s Question</h2>
      <h2 ng-if="!question.asked_by.first_name">Details of Go Trending Question</h2>

      <span flex></span>
      <md-button ng-if="!questionAnswer" class="md-raised md-accent" aria-label="description" md-ripple-size="full" ng-click="openAnswerDialog($event)">Post Answer</md-button>
      <md-button ng-if="questionAnswer" class="md-raised md-accent" aria-label="description" md-ripple-size="full" ng-click="editAnswer($event, questionAnswer)">Edit Answer</md-button>
  </div>
</md-toolbar>

<div class="sm-main-container">
  <div ng-if="!questionLoaded" layout="row" layout-align="center center" style="min-height: 80vh;">
    <md-progress-circular md-mode="indeterminate"></md-progress-circular>
  </div>

  <div ng-if="questionLoaded">
    <div ng-if="invalidQuestion" layout="column" layout-align="center center" style="min-height: 80vh;">
      <h4>This is not a valid question id</h4>
      <md-button class="md-raised md-accent" aria-label="description" md-ripple-size="full" href="#go_trending_questions">Back to all Go Trending Questions</md-button>
    </div>

    <div ng-if="!invalidQuestion">
      <md-card class="sm-trending-question-card">
        <md-card-content>
          <p class="sm-trending-question-body">{{question.question_in_text}}</p>
          <img ng-if="question.question_image_url" ng-src="{{question.question_image_url}}" alt="Question Image" style="width:100%;">
        </md-card-content>
        <md-card-footer class="sm-trending-question-footer">
          <div layout="row">
            <img class="sm-trending-question-avatar" ng-if="question.asked_by.display_pictures_urls" ng-src="{{splitDisplayPicUrl(question.asked_by.display_pictures_urls)}}" />
            <img class="sm-trending-question-avatar" ng-if="!question.asked_by.display_pictures_urls" gravatar-src="'{{question.asked_by.email}}'" gravatar-size="200"/>

            <div layout="column">
              <p class="sm-trending-qtn-name">{{question.asked_by.first_name}} {{question.asked_by.last_name}}</p>
              <p class="sm-trending-qtn-school">{{question.asked_by.school.school_name || 'Unknown School'}}</p>
            </div>
            <span flex></span>
            <md-button ng-if="authenticatedUser.user_type == 'admin'" class="md-raised md-warn" aria-label="description" md-ripple-size="full" ng-click="deleteQuestion($event, question)">
              <md-tooltip md-direction="top">
                Delete this question
              </md-tooltip>
              <i class="material-icons">delete_forever</i>
            </md-button>
          </div>
        </md-card-footer>
      </md-card>

      <md-card class="sm-trending-question-card" ng-if="questionAnswer">
        <md-card-content>
          <h3 class="sm-trending-question-title">Answer to {{question.asked_by.first_name}} {{question.asked_by.last_name}}'s Question</h3>

          <div class="sm-question-answer-text" ng-if="questionAnswer.answer_text">
            <div ng-bind-html="questionAnswer.answer_text"></div>
          </div>

          <div class="sm-question-answer-video" ng-if="questionAnswer.answer_video_url">
            <videogular vg-theme="video_config.theme">
        			<vg-media vg-src="video_config.sources"></vg-media>

              <vg-controls>
        				<vg-play-pause-button></vg-play-pause-button>
        				<vg-time-display>{{ currentTime | date:'mm:ss' }}</vg-time-display>
        				<vg-scrub-bar>
        					<vg-scrub-bar-current-time></vg-scrub-bar-current-time>
        				</vg-scrub-bar>
        				<vg-time-display>{{ timeLeft | date:'mm:ss' }}</vg-time-display>
        				<vg-volume>
        					<vg-mute-button></vg-mute-button>
        					<vg-volume-bar></vg-volume-bar>
        				</vg-volume>
        				<vg-fullscreen-button></vg-fullscreen-button>
        			</vg-controls>

        			<vg-overlay-play></vg-overlay-play>
        			<vg-poster vg-url='config.plugins.poster'></vg-poster>
        		</videogular>
          </div>

          <div class="sm-question-answer-image" ng-if="questionAnswer.answer_image_url">
            <img ng-src="{{questionAnswer.answer_image_url}}" alt="" style="width:100%">
          </div>

        </md-card-content>

        <md-card-footer class="sm-trending-question-footer">

        </md-card-footer>
      </md-card>
    </div>

  </div>
</div>
