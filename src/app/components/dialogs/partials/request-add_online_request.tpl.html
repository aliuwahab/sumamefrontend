<md-dialog aria-label="add online purchase request" ng-controller="OnlineRequestsController">
  <form>
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2>Add Online Purchase Request</h2>
        <span flex></span>
        <md-button class="md-icon-button" ng-click="closeDialog()">
          <i class="material-icons">close</i>
        </md-button>
      </div>
    </md-toolbar>
    <md-dialog-content class="sm-modal-content" style="width:700px;">
      <div ng-if="loadingRequiredOnlineRequestData || addingRequest" layout="row" layout-align="center center" style="min-height: 40vh;">
        <md-progress-circular md-mode="indeterminate" md-diameter="48"></md-progress-circular>
      </div>

      <div ng-show="!loadingRequiredOnlineRequestData && !addingRequest">

        <div class="padded sm-req-online-info" md-whiteframe="3">
          <h5 class="sm-req-online-info-title">Important Info!</h5>
          <p>This is meant for shopping abroad when the online shop does not ship to Ghana. First, choose one of our warehouses below as an address which you'll use as your shipping address to make the purchase online. Once you've completed your purchase, fill the form below and expect your order at your doorstep in Ghana.</p>
        </div>

        <md-input-container style="width:100%;">
          <label>Choose a warehouse location</label>
          <md-select ng-model="selectedWarehouse">
            <md-option ng-value="warehouse" ng-repeat="warehouse in warehouses.data">{{warehouse.name}}</md-option>
          </md-select>
        </md-input-container>

        <div class="sm-dropzone sm-req-address-info" ng-if="selectedWarehouse">
          <h5 class="sm-req-online-info-title">{{selectedWarehouse.name}}</h5>
          <p>{{selectedWarehouse.address_line_one}}</p>
          <p>{{selectedWarehouse.address_line_two}}</p>
          <p>{{selectedWarehouse.state}}</p>
          <p>{{selectedWarehouse.country}}</p>
        </div>

        <md-input-container class="sm-input-container">
          <label>Enter order number</label>
          <input type="text" ng-model="newRequest.online_order_number">
        </md-input-container>

        <md-input-container class="sm-input-container">
          <label>Enter item value</label>
          <input type="text" ng-model="itemValue">
        </md-input-container>

        <md-input-container class="sm-input-container">
          <label>Enter tracking code</label>
          <input type="text" ng-model="newRequest.online_tracking_number">
        </md-input-container>

        <md-input-container class="sm-input-container">
          <place-autocomplete label="Where should we deliver your item?" ng-model="mapping.deliveryLocation"></place-autocomplete>
        </md-input-container>

        <md-input-container>
          <md-checkbox ng-model="newRequest.hazardous_substance" aria-label="Is this a hazardous substance?">
            This is a hazardous substance.
          </md-checkbox>
        </md-input-container>

        <md-input-container>
          <md-checkbox ng-model="newRequest.fast_track" aria-label="Is this a hazardous substance?">
            I need this shipment fast-tracked. Use Airfreight instead of Seafreight.
          </md-checkbox>
        </md-input-container>

        <md-input-container class="md-block">
          <label>Any additional instructions or a link to the item?</label>
          <textarea ui-tinymce ng-model="newRequest.request_additional_description" aria-label="Any addional instructions?" md-select-on-focus rows="3"></textarea>
        </md-input-container>
      </div>

    </md-dialog-content>

    <md-dialog-actions layout="row">
      <span flex></span>
      <md-button ng-click="closeDialog()" class="md-raised md-warn">
        Cancel
      </md-button>
      <md-button ng-click="addOnlineRequest()" class="md-raised md-accent">
        Submit Request
      </md-button>
    </md-dialog-actions>
  </form>
</md-dialog>
