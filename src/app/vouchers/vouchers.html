<md-toolbar>
    <div class="md-toolbar-tools">
        <md-button class="md-icon-button"
                   aria-label="Menu Button"
                   hide-gt-md
                   ng-click="onClickMenu();">
            <md-icon
                    md-svg-icon="assets/icons/menu.svg"
                    aria-label="Menu Icon">
            </md-icon>
        </md-button>

        <h2>Vouchers</h2>

        <span flex></span>

        <md-button class="md-raised md-accent" ng-disabled="false" aria-label="description"  md-ripple-size="full" ng-click="showVoucherGenerationDialog($event)">Generate Vouchers</md-button>

        <md-button class="md-raised md-warn" ng-disabled="false" aria-label="description"  md-ripple-size="full" ng-click="showVoucherPrintDialog($event)">Print All Vouchers</md-button>

    </div>
</md-toolbar>

<div class="sm-main-container">

  <md-card>
    <md-card-content>
      <md-table-container>
        <table md-table md-progress="vouchersPromise">
          <thead md-head md-order="query.vouchers" md-on-reorder="getVouchers">
            <tr md-row>
              <th md-column>VOUCHER CODE</th>
              <th md-column>DURATION (MONTHS)</th>
              <th md-column>GENERATED BY</th>
              <th md-column>USDED BY</th>
              <th md-column>EXPIRATION DATE</th>
              <th md-column md-numeric></th>
            </tr>
          </thead>
          <tbody md-body>
            <tr md-row md-select="dessert" md-select-id="name" md-auto-select ng-repeat="voucher in vouchers.data">
              <td md-cell ng-class="{'sm-blocked-item': !voucher.voucher_status}">{{voucher.voucher_code}}</td>
              <td md-cell ng-class="{'sm-blocked-item': !voucher.voucher_status}" style="text-align:center;">{{voucher.duration_in_months}}</td>
              <td md-cell ng-class="{'sm-blocked-item': !voucher.voucher_status}">{{voucher.generated_by.first_name}} {{voucher.generated_by.last_name}}</td>
              <td md-cell ng-class="{'sm-blocked-item': !voucher.voucher_status}">{{voucher.student_who_used.first_name}} {{voucher.student_who_used.last_name}}</td>
              <td md-cell ng-class="{'sm-blocked-item': !voucher.voucher_status}">{{voucher.expiration_date | date:"MMMM d, y"}}</td>
              <td md-cell style="padding:0px;">
                <button class="md-button md-raised md-primary" ng-click="showVoucherPrintDialog($event, voucher, true)" style="margin:0px; margin-right:15px;">
                  <md-tooltip md-direction="top">
                    View voucher details ({{voucher.voucher_code}})
                  </md-tooltip>
                  <i class="material-icons">remove_red_eye</i>
                </button>
                <button ng-if="voucher.voucher_status" class="md-button md-raised md-warn" ng-click="changeVoucherStatus(voucher)" style="margin:0px;">
                  <md-tooltip md-direction="top">
                    Block voucher ({{voucher.voucher_code}})
                  </md-tooltip>
                  <i class="material-icons">lock</i>
                </button>
                <button ng-if="!voucher.voucher_status" class="md-button md-raised md-primary" ng-click="changeVoucherStatus(voucher)" style="margin:0px;">
                  <md-tooltip md-direction="top">
                    Unblock voucher ({{voucher.voucher_code}})
                  </md-tooltip>
                  <i class="material-icons">vpn_key</i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </md-table-container>

      <md-table-pagination md-limit="filterParams.limit" md-limit-options="[50, 100, 200]" md-page="filterParams.page" md-total="{{vouchers.total}}" md-on-paginate="getAllVouchers" md-page-select></md-table-pagination>
    </md-card-content>
  </md-card>

  <!-- VOUCHER CARD -->
  <md-card class="sm-voucher-card hide">
    <md-card-content>
      <div layout="row">
        <div layout="column" class="sm-voucher-section-left">
          <h1 class="sm-voucher-title">Learn Rite Top Up Voucher</h1>
          <h4 class="sm-voucher-subtitle">Learn. Collaborate. Succeed.</h4>

          <p class="sm-voucher-duration">3 MONTHS (GHC 10)</p>
          <div class="sm-voucher-code-container">
            Xab45-cs238-bNVa-v452s-2445bx
          </div>
          <div class="sm-topup-instructions-container">
            <p class="sm-topup-instructions-title">TOP UP INSTRUCTIONS</p>
            <ol class="sm-topup-instructions-ol">
              <li class="sm-topup-instructions-ol-item">Download the Learn Rite mobile app.</li>
              <li class="sm-topup-instructions-ol-item">Create an account, verify your phone number and login.</li>
              <li class="sm-topup-instructions-ol-item">You'll either be prompted or go settings and choose topup.</li>
            </ol>
          </div>
        </div>
        <div layout="column" class="sm-voucher-section-right">
          <h3 class="sm-about-title">About Learn Rite</h3>
          <p class="sm-about-body">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

          <img class="sm-qr-code-image" src="assets/images/static_qr_code_without_logo.jpg" alt="Learn Rite QR Code">
        </div>
      </div>
    </md-card-content>
  </md-card>

</div>
